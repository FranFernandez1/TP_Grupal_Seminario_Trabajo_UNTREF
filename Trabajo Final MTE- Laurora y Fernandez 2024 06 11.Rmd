---
title: "Trabajo Práctico Grupal - Seminario Mercado de Trabajo y Empleo"
author: "Melisa Laurora y Francisco Fernández"
date: "2024-06-02"
output:
  html_document:
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Análisis Brasil

::: {align="justify"}
El siguiente trabajo práctico es condición obligatoria para la promoción
de la materia **Mercado de trabajo y empleo de la Maestría en Generación
y Analisis de Información Estadística de la UNTREF**. El mismo es de
resolución grupal.

#### Fecha de entrega:

Martes 18 de junio. La entrega será un informe en Rmarkdown alojado en
un repositorio de Github que pueda correrse desde cualquier computadora,
con la base datos correspondiente en el directorio de trabajo.

## 1

Abrir y explorar las distintas bases de datos. Describir brevemente
(en 1 párrafo) la metodología con que la encuesta es elaborada y
explicar (en un tabulado) las variables que serán utilizadas en el
TP.

```{r warning=FALSE, message = FALSE,include=FALSE}
# librerias
library(tidyverse)
library(ggplot2)
library(kableExtra)

#Cargar base de datos
base<-readRDS(file='Brasil_T32019.Rda')
summary(base)

```

### PNAD Continua - Encuesta Nacional Continua por Muestra de Hogares

Tiene como objetivo principal seguir las fluctuaciones trimestrales y la
evolución en la inserción de la población en el mercado laboral y
características como edad, sexo y nivel de educación, además de permitir
el estudio del desarrollo socioeconómico del país a través de la
producción de datos anuales sobre otras formas de trabajo. Es una
encuesta integrada de viviendas; con muestreo probabilístico; frecuencia
de divulgación trimestral/ anual; población objetivo compuesta por todas
las personas que viven en hogares privados permanentes en el área
cubierta por la investigación (Grandes Regiones, Unidades de Federación,
20 Regiones Metropolitanas que contienen Municipios Capitales,
Municipios de las Capitales y Región de Desarrollo Integrado de la Gran
Teresina).

Fuente:
<https://www.ibge.gov.br/estatisticas/sociais/trabalho/17270-pnad-continua.html?=&t=o-que-e>

```{r warning=FALSE}
var <- read.csv("Variables.csv")
kable(var)
```

## 2

Estimar y presentar las tasas básicas del mercado de trabajo. Analizar 
brevemente los resultados encontrados.

```{r warning=FALSE}
if (!require('scales')) install.packages('scales'); library('scales')

Cuadro_1.1a <- base %>% 
  summarise(Poblacion         = sum(V1028),
            Ocupados          = sum(V1028[VD4002 == "Pessoas ocupadas"],na.rm=TRUE),
            Desocupados       = sum(V1028[VD4002 == "Pessoas desocupadas"],na.rm=TRUE),
            PEA               = Ocupados + Desocupados,
            Ocupados_demand   = sum(V1028[VD4002 == "Pessoas ocupadas" & V4071 =="Sim"],na.rm=TRUE),
            Suboc_demandante  = sum(V1028[(VD4004 =="Pessoas subocupadas"|VD4004A=="Pessoas subocupadas") & (V4063=="Sim"|V4063A=="Sim"|VD4005=="Pessoas desalentadas")],na.rm=TRUE),#VD4005
            Suboc_no_demand   = sum(V1028[(VD4004 =="Pessoas subocupadas"|VD4004A=="Pessoas subocupadas") & (V4063=="Não"|V4063A=="Não")],na.rm=TRUE),
            Subocupados       =  sum(V1028[(VD4004 =="Pessoas subocupadas"|VD4004A=="Pessoas subocupadas")],na.rm=TRUE),
            'Tasa Actividad'                  = percent(PEA/Poblacion, accuracy = 0.1),
            'Tasa Empleo'                     = percent(Ocupados/Poblacion, accuracy = 0.1),
            'Tasa Desocupacion'               = percent(Desocupados/PEA, accuracy = 0.1),
            'Tasa ocupados demandantes'       = percent(Ocupados_demand/PEA, accuracy = 0.1),
            'Tasa Subocupación'               = percent(Subocupados/PEA, accuracy = 0.1),                       'Tasa Subocupación demandante'    = percent(Suboc_demandante/PEA, accuracy = 0.1),
            'Tasa Subocupación no demandante' = percent(Suboc_no_demand/PEA, accuracy = 0.1))
  
kable(Cuadro_1.1a)
```

## 3

Realizar una operacionalización de los conceptos de Sector Formal y
Sector Informal, de modo de clasificar a toda la población activa en
alguno de estos dos sectores. Explicar qué variables se eligieron y por
qué.

```{r warning=FALSE}


```

## 4

Realizar una operacionalización del concepto de precariedad laboral,
clasificando a toda la población asalariada.

```{r warning=FALSE}

```

## 5

Presentar de forma tabulada la incidencia de la informalidad y la
precariedad en la población ocupada y/o asalariada.

```{r warning=FALSE}
# Join


```

## 6

Analizar la incidencia de la informalidad y la precariedad según sexo y
edad.

```{r warning=FALSE}



```

Consignas para todos los países Analizar brevemente las diferencias en
la estructura demográfica y del mercado de trabajo entre países. Luego
comparar entre países todas las dimensiones estudiadas en las consignas
anteriores. A la hora de realizar comparaciones, tener en cuenta y
reflexionar sobre los distintos criterios adoptados para operacionalizar
los conceptos estudiados para cada fuente de datos.

```{r warning=FALSE}


```

Otras aclaraciones: Describir todas las decisiones metodológicas
realizadas, en cuanto a la operacionalización de conceptos, las
variables utilizadas y el universo de análisis. Tener en cuenta que para
la mayoría de las consignas hay más de una respuesta válida. No es
necesario incluir una revisión de la literatura sobre informalidad y
precariedad en el TP, tan sólo las referencias necesarias para
fundamentar la elección de las variables.
:::

```{r warning=FALSE}

```

------------------------------------------------------------------------

# Análisis España y Reino Unido

```{r}
install.packages("tidyverse")
library(tidyverse)
```

```{r}
bbdd_uk=read.csv("reino_unido.csv")
```

```{r}
bbdd_espana=read.csv("espana.csv")
```

## 1) Abrir y explorar las distintas bases de datos. Describir brevemente la metodología con que la encuesta es elaborada y explicar las variables que serán utilizadas en el TP.


La Encuesta de Fuerza de Trabajo de la Unión Europea (EU-LFS) es la encuesta de hogares e individuos más extensa de la Unión Europea. Su objetivo estadístico principal es clasificar a las personas en tres categorías mutuamente excluyentes: empleados,desempleados y personas por fuera de la fuerza de trabajo. Esta encuesta se realiza de forma trimestral en todos los países de la Unión Europea en un formato estandarizado para todos los países, facilitando así la comparación entre ellos. La población a la cual se le puede realizar la encuesta es de 15 años o más.

Las variables a utilizar, tanto para el caso de España como de Reino Unido, serán las siguentes:

```{r}

Variables <- c("WSTATOR", "MAINSTAT", "COEFF", "STAPRO","SIZEFIRM","TEMP","HWOVERPU","SEEKWORK")
Descripcion <- c("Estado laboral durante la semana de referencia", 
                  "Estado laboral general", 
                  "Factor ponderador de la poblacion", 
                  "Estatus Profesional",
                  "Tamaño de la empresa",
                  "Trabajo Temporal o Permanente",
                  "Cantidad de horas extras no pagas durante la semana de referencia",
                  "En búsqueda laboral")


variable_table <- data.frame(Variable = Variables, Description = Descripcion)

variable_table %>%
  kable() %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))

```

## 2) Estimar y presentar las tasas básicas del mercado de trabajo. Analizar brevemente los resultados encontrados.


```{r warning=FALSE}
if (!require('scales')) install.packages('scales'); library('scales')

Cuadro_2_ESPAÑA <- bbdd_espana %>% 
  summarise(Poblacion         = sum(COEFF*1000, na.rm = TRUE),
            Ocupados          = sum((WSTATOR %in% c(1,2))*(COEFF*1000),na.rm=TRUE),
            Desocupados_Inactivos = sum((WSTATOR %in% c(3,4,5))*(COEFF*1000),na.rm=TRUE),
            Menores           = sum((WSTATOR %in% c(9))*(COEFF*1000),na.rm=TRUE),
            Buscando_Trabajo  = sum((SEEKWORK %in% c(1,2,3,4))*(COEFF*1000),na.rm=TRUE),
            PEA               = Ocupados + Desocupados_Inactivos
            )

kable(Cuadro_2_ESPAÑA)


```



```{r}

# Counting cases where WSTATOR is either 1 or 2
count_cases <- sum(bbdd_espana$WSTATOR %in% c(1, 2))

# Printing the result
print(count_cases)
```

